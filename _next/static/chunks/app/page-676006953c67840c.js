(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{13314:(e,t,n)=>{Promise.resolve().then(n.bind(n,17539))},17539:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>R});var s=n(95155),a=n(4719),i=n(35965),r=n(12115);function l(e){return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:"w-screen h-screen absolute translate-y-[-50%] translate-x-[-50%] top-[50%] left-[50%] z-0 bg-opacity-20 bg-black flex justify-center items-center",onClick:()=>e.setIsOpen(!1),children:(0,s.jsx)("div",{className:"w-[80%] h-[50%] bg-background overflow-auto p-5 rounded-lg",children:e.proof?JSON.stringify(e.proof):""})})})}var o=n(21169),d=n(66006),c=n(2818);function u(e){let t=async()=>{let t=c.env.NEXT_PUBLIC_APP_ID,n=c.env.NEXT_PUBLIC_APP_SECRET,s=e.providerID,a=await d.ReclaimProofRequest.init(t,n,s),i=await a.getRequestUrl();console.log("Request URL:",i),e.setRequestUrl(i),await a.startSession({onSuccess:t=>{t&&("string"==typeof t?(console.log("SDK Message:",t),e.setProof(t)):"string"!=typeof t&&(console.log("Proof generation success",null==t?void 0:t.claimData.context),e.setProof(t)))},onError:e=>{console.error("Verification failed",e)}})};return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full",onClick:t,children:"Get Proof"})})}var p=n(6020);function m(e){return(0,s.jsx)(s.Fragment,{children:e.requestUrl?(0,s.jsx)("div",{style:{margin:"20px 0"},children:(0,s.jsx)(p.Ay,{value:e.requestUrl,size:200})}):(0,s.jsx)("div",{className:"flex items-center justify-center w-[200px] h-[200px] bg-stone rounded-lg",children:(0,s.jsx)("h2",{children:"QR not generated yet"})})})}var y=n(72095),f=n(71327),x=n(50860),b=n(93668),h=n(52604),g=n(27193),T=n(51680);let v=e=>{let{notifications:t,onClose:n}=e;if(!t.length)return null;let a=e=>{window.open("https://base-sepolia.blockscout.com/tx/".concat(e),"_blank")},i=e=>{if(!e.txHash)return e.message;let t=e.message.split(e.txHash);return(0,s.jsxs)(s.Fragment,{children:[t[0],(0,s.jsxs)("button",{onClick:()=>a(e.txHash),className:"inline-flex items-center gap-1 underline hover:text-blue-600",children:["".concat(e.txHash.slice(0,6),"...").concat(e.txHash.slice(-4)),(0,s.jsx)(h.A,{className:"h-3 w-3"})]}),t[1]]})};return(0,s.jsx)("div",{className:"fixed top-20 right-4 left-4 md:left-auto md:w-96 z-50 space-y-4",children:t.map(e=>(0,s.jsx)("div",{className:"transition-all duration-300 ".concat(e.isVisible?"opacity-100 transform translate-y-0":"opacity-0 transform -translate-y-2"),children:(0,s.jsx)("div",{className:"\n              rounded-lg border p-4 shadow-lg\n              ".concat("success"===e.type?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800","\n            "),role:"alert",children:(0,s.jsxs)("div",{className:"flex items-start gap-2",children:["success"===e.type?(0,s.jsx)(g.A,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}):(0,s.jsx)(T.A,{className:"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5"}),(0,s.jsx)("p",{className:"text-sm font-medium break-all",children:i(e)})]})})},e.id))})},j=()=>Math.random().toString(36).substr(2,9),N=e=>e.slice(0,66);function w(){let[e,t]=(0,r.useState)([]),n=e=>{t(t=>t.filter(t=>t.id!==e))};return{notifications:e,addNotification:(e,s,a)=>{let i=j();t(t=>[...t,{id:i,message:e,type:s,isVisible:!0,txHash:a}]),setTimeout(()=>{n(i)},6e3)},removeNotification:n,extractMainHash:N}}var I=n(2818);function _(e){let t=(0,i.F)(),{notifications:n,addNotification:a,removeNotification:l}=w(),o="0xFf055825cDaB483114A3cAaA6Fbd1279b18AD304",{data:c,writeContractAsync:u,isPending:p,isSuccess:m}=(0,y.x)(),{isSuccess:h,data:g}=(0,f.g)({hash:c,enabled:!!c});(0,r.useEffect)(()=>{m&&c&&(console.log("Transaction sent:",c),a("Transazione inviata! In attesa di conferma...","success",c))},[m,c]),(0,r.useEffect)(()=>{h&&g&&(console.log("Transaction confirmed:",g),setTimeout(()=>{a("Token mintato con successo! TX: ","success",g.transactionHash)},1500))},[h,g]);let{writeContracts:T,isPending:j}=(0,x.o)({mutation:{onSuccess:e=>{a("User Operation inviata! In attesa di conferma...","success"),setTimeout(()=>{a("Token mintato con successo! User Operation: ","success",N(e))},1500)}}}),_=async()=>{let n=[t.address,"0x0000000000000000000000000000000000000000000000000000000000000000",(0,d.transformForOnchain)(e.proof)];try{var s;if((null===(s=t.connector)||void 0===s?void 0:s.type)==="coinbaseWallet"){let e={paymasterService:{url:I.env.NEXT_PUBLIC_PAYMASTER_AND_BUNDLER_ENDPOINT}};T({contracts:[{address:o,abi:b.HV,functionName:"mint",args:n}],capabilities:e})}else await u({address:o,abi:b.HV,functionName:"mint",args:n})}catch(e){console.error("[ClaimToken] Error:",e),a("Errore durante il mint: "+e.message,"error")}};return(0,s.jsxs)("div",{className:"flex flex-col items-center mt-6",children:[(0,s.jsx)(v,{notifications:n,onClose:l}),(0,s.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full",onClick:_,disabled:p||j,children:p||j?"minting...":"Claim"})]})}var P=n(89984),F=n(2818);function E(){let[e,t]=(0,r.useState)(),[n,a]=(0,r.useState)(),[d,c]=(0,r.useState)(),[p,y]=(0,r.useState)(""),[f,x]=(0,r.useState)(),[h,g]=(0,r.useState)(!1),T=(0,i.F)(),v="0xFf055825cDaB483114A3cAaA6Fbd1279b18AD304",{data:j}=(0,P.Q)({address:v,abi:b.HV,functionName:"balanceOf",args:[T.address,0]}),{data:N}=(0,P.Q)({address:v,abi:b.HV,functionName:"balanceOf",args:[T.address,1]}),{data:w}=(0,P.Q)({address:v,abi:b.HV,functionName:"balanceOf",args:[T.address,2]}),I=F.env.NEXT_PUBLIC_FIRST_PROVIDER_ID,E=F.env.NEXT_PUBLIC_SECOND_PROVIDER_ID,k=F.env.NEXT_PUBLIC_THIRD_PROVIDER_ID;return console.log(j),(0,s.jsxs)("div",{className:"h-full flex flex-col items-center justify-center px-10 gap-y-8",children:[(0,s.jsx)(m,{requestUrl:p}),(0,s.jsxs)("div",{className:"flex flex-row items-center justify-center gap-x-12",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-y-4 h-full",children:[(0,s.jsx)("h2",{className:"text-center font-bold",children:"License Points"}),j&&j>BigInt(0)?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"text-center",children:["Claimed ",(0,s.jsx)(o.L7X,{className:"inline text-green"})]})}):e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"text-blue-500",onClick:()=>(x(e),g(!0)),children:"View Proof"}),(0,s.jsx)(_,{proof:e,id:0})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:["Not generated ",(0,s.jsx)(o.XfH,{className:"inline text-red"})]}),(0,s.jsx)(u,{setProof:t,setRequestUrl:y,providerID:I})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-y-4 h-full",children:[(0,s.jsx)("h2",{className:"text-center font-bold",children:"Donation"}),N&&N>BigInt(0)?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"text-center",children:["Claimed ",(0,s.jsx)(o.L7X,{className:"inline text-green"})]})}):n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"text-blue-500",onClick:()=>(x(n),g(!0)),children:"View Proof"}),(0,s.jsx)(_,{proof:n,id:1})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:["Not generated ",(0,s.jsx)(o.XfH,{className:"inline text-red"})]}),(0,s.jsx)(u,{setProof:a,setRequestUrl:y,providerID:E})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-y-4 h-full",children:[(0,s.jsx)("h2",{className:"text-center font-bold",children:"Carbon Footprint"}),w&&w>BigInt(0)?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"text-center",children:["Claimed ",(0,s.jsx)(o.L7X,{className:"inline text-green"})]})}):d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{className:"text-blue-500",onClick:()=>(x(d),g(!0)),children:"View Proof"}),(0,s.jsx)(_,{proof:d,id:2})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:["Not generated ",(0,s.jsx)(o.XfH,{className:"inline text-red"})]}),(0,s.jsx)(u,{setProof:c,setRequestUrl:y,providerID:k})]})]})]}),h&&(0,s.jsx)(l,{setIsOpen:g,proof:f})]})}function k(){let e=(0,i.F)();return(0,s.jsx)(s.Fragment,{children:"connected"==e.status?(0,s.jsx)(E,{}):(0,s.jsx)("div",{className:"flex justify-center items-center h-full w-full",children:"Please connect your wallet"})})}let A=JSON.parse('{"HV":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256[]","name":"ids","type":"uint256[]"},{"indexed":false,"internalType":"uint256[]","name":"values","type":"uint256[]"}],"name":"TransferBatch","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"id","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"TransferSingle","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"string","name":"value","type":"string"},{"indexed":true,"internalType":"uint256","name":"id","type":"uint256"}],"name":"URI","type":"event"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"_URIs","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"_baseURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"id","type":"uint256"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address[]","name":"accounts","type":"address[]"},{"internalType":"uint256[]","name":"ids","type":"uint256[]"}],"name":"balanceOfBatch","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"mint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256[]","name":"ids","type":"uint256[]"},{"internalType":"uint256[]","name":"amounts","type":"uint256[]"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeBatchTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"newuri","type":"string"}],"name":"setBaseURI","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"string","name":"newuri","type":"string"}],"name":"setTokenURI","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"uri","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"}]}');var C=n(2818);function O(){let e=(0,i.F)(),{notifications:t,addNotification:n,removeNotification:a}=w(),l="0x60dF8978e207969654Ea7C07794A444fcc1Cd01F",{data:o,writeContractAsync:d,isPending:c,isSuccess:u}=(0,y.x)(),{isSuccess:p,data:m}=(0,f.g)({hash:o,enabled:!!o});(0,r.useEffect)(()=>{u&&o&&(console.log("Transaction sent:",o),n("Transazione inviata! In attesa di conferma...","success",o))},[u,o]),(0,r.useEffect)(()=>{p&&m&&(console.log("Transaction confirmed:",m),setTimeout(()=>{n("Token mintato con successo! TX: ","success",m.transactionHash)},1500))},[p,m]);let{writeContracts:b,isPending:h}=(0,x.o)({mutation:{onSuccess:e=>{n("User Operation inviata! In attesa di conferma...","success"),setTimeout(()=>{n("Token mintato con successo! User Operation: ","success",N(e))},1500)}}}),g=async()=>{let t=[e.address,0,"0x0000000000000000000000000000000000000000000000000000000000000000"];try{var s;if((null===(s=e.connector)||void 0===s?void 0:s.type)==="coinbaseWallet"){let e={paymasterService:{url:C.env.NEXT_PUBLIC_PAYMASTER_AND_BUNDLER_ENDPOINT}};b({contracts:[{address:l,abi:A.HV,functionName:"mint",args:t}],capabilities:e})}else await d({address:l,abi:A.HV,functionName:"mint",args:t})}catch(e){console.error("[TestMint] Error:",e),n("Errore durante il mint: "+e.message,"error")}};return(0,s.jsxs)("div",{className:"flex flex-col items-center mt-6",children:[(0,s.jsx)(v,{notifications:t,onClose:a}),(0,s.jsx)("button",{className:"bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-full",onClick:g,disabled:c||h,children:c||h?"minting...":"Test Mint"})]})}function R(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.A,{backButton:!1,gameButton:!0}),(0,s.jsx)("div",{className:"flex flex-col gap-8",children:(0,s.jsx)(O,{})}),(0,s.jsx)(k,{})]})}},4719:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var s=n(95155),a=n(64276),i=n(48173),r=n.n(i);function l(e){return(0,s.jsxs)("div",{className:"w-full p-4 flex justify-between",children:[(0,s.jsx)(r(),{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full self-center ".concat(e.backButton?"":"hidden"),href:"/",children:"Back"}),(0,s.jsx)(r(),{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full self-center ".concat(e.gameButton?"":"hidden"),href:"/game",children:"Game"}),(0,s.jsx)(a.pK,{})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[8451,3380,8915,8173,2214,3668,8441,1517,7358],()=>t(13314)),_N_E=e.O()}]);